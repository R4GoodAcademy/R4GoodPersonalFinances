<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot scenarios metrics — plot_scenarios • R4GoodPersonalFinances</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Plot scenarios metrics — plot_scenarios"><meta name="description" content="The plot allows to compare metrics for multiple scenarios.
If scenarios are simulated without Monte Carlo samples,
so they are based only on expected returns of portfolio,
two metrics are available for each scenario:
constant discretionary spending - certainty equivalent constant
level of consumption that would result in the same lifetime utility
as a given series of future consumption in a given scenario
(the higher, the better).
utility of discretionary spending - normalized
to minimum and maximum values of constant discretionary spending
(the higher, the better).


If scenarios are simulated with additional Monte Carlo samples,
there are four more metrics available per scenario:
constant discretionary spending (for Monte Carlo samples),
normalized median utility of discretionary spending
(for Monte Carlo samples),
median of missing funds that need additional income
or additional savings at the expense of non-discretionary spending,
(of yearly averages of Monte Carlo samples),
median of discretionary spending
(of yearly averages of Monte Carlo samples).

"><meta property="og:description" content="The plot allows to compare metrics for multiple scenarios.
If scenarios are simulated without Monte Carlo samples,
so they are based only on expected returns of portfolio,
two metrics are available for each scenario:
constant discretionary spending - certainty equivalent constant
level of consumption that would result in the same lifetime utility
as a given series of future consumption in a given scenario
(the higher, the better).
utility of discretionary spending - normalized
to minimum and maximum values of constant discretionary spending
(the higher, the better).


If scenarios are simulated with additional Monte Carlo samples,
there are four more metrics available per scenario:
constant discretionary spending (for Monte Carlo samples),
normalized median utility of discretionary spending
(for Monte Carlo samples),
median of missing funds that need additional income
or additional savings at the expense of non-discretionary spending,
(of yearly averages of Monte Carlo samples),
median of discretionary spending
(of yearly averages of Monte Carlo samples).

"><meta property="og:image" content="https://r4goodacademy.github.io/R4GoodPersonalFinances/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">R4GoodPersonalFinances</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/R4GoodAcademy/R4GoodPersonalFinances/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plot scenarios metrics</h1>
      <small class="dont-index">Source: <a href="https://github.com/R4GoodAcademy/R4GoodPersonalFinances/blob/main/R/plot_scenarios.R" class="external-link"><code>R/plot_scenarios.R</code></a></small>
      <div class="d-none name"><code>plot_scenarios.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The plot allows to compare metrics for multiple scenarios.</p>
<p>If scenarios are simulated without Monte Carlo samples,
so they are based only on expected returns of portfolio,
two metrics are available for each scenario:</p><ul><li><p>constant discretionary spending - certainty equivalent constant
level of consumption that would result in the same lifetime utility
as a given series of future consumption in a given scenario
(the higher, the better).</p></li>
<li><p>utility of discretionary spending - normalized
to minimum and maximum values of constant discretionary spending
(the higher, the better).</p></li>
</ul><p>If scenarios are simulated with additional Monte Carlo samples,
there are four more metrics available per scenario:</p><ul><li><p>constant discretionary spending (for Monte Carlo samples),</p></li>
<li><p>normalized median utility of discretionary spending
(for Monte Carlo samples),</p></li>
<li><p>median of missing funds that need additional income
or additional savings at the expense of non-discretionary spending,
(of yearly averages of Monte Carlo samples),</p></li>
<li><p>median of discretionary spending
(of yearly averages of Monte Carlo samples).</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_scenarios</span><span class="op">(</span><span class="va">scenarios</span>, period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"yearly"</span>, <span class="st">"monthly"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-scenarios">scenarios<a class="anchor" aria-label="anchor" href="#arg-scenarios"></a></dt>
<dd><p>A <code>tibble</code> with nested columns -
the result of <code><a href="simulate_scenarios.html">simulate_scenarios()</a></code>.</p></dd>


<dt id="arg-period">period<a class="anchor" aria-label="anchor" href="#arg-period"></a></dt>
<dd><p>A character. The amounts can be shown
as yearly values (default) or averaged per month values.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot2::ggplot()</a></code> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># interactive()</span></span></span>
<span class="r-in"><span><span class="va">older_member</span> <span class="op">&lt;-</span> <span class="va"><a href="HouseholdMember.html">HouseholdMember</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>  name       <span class="op">=</span> <span class="st">"older"</span>,  </span></span>
<span class="r-in"><span>  birth_date <span class="op">=</span> <span class="st">"1980-02-15"</span>,</span></span>
<span class="r-in"><span>  mode       <span class="op">=</span> <span class="fl">80</span>,</span></span>
<span class="r-in"><span>  dispersion <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span>  </span></span>
<span class="r-in"><span><span class="va">household</span> <span class="op">&lt;-</span> <span class="va"><a href="Household.html">Household</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">household</span><span class="op">$</span><span class="fu">add_member</span><span class="op">(</span><span class="va">older_member</span><span class="op">)</span>  </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">household</span><span class="op">$</span><span class="va">expected_income</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"income"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"is_not_on('older', 'retirement') ~ 7000 * 12"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">household</span><span class="op">$</span><span class="va">expected_spending</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"spending"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"TRUE ~ 4000 * 12"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">portfolio</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_portfolio_template.html">create_portfolio_template</a></span><span class="op">(</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">portfolio</span><span class="op">$</span><span class="va">accounts</span><span class="op">$</span><span class="va">taxable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100000</span>, <span class="fl">300000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">portfolio</span> <span class="op">&lt;-</span> </span></span>
<span class="r-in"><span>  <span class="va">portfolio</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="calc_effective_tax_rate.html">calc_effective_tax_rate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    tax_rate_ltcg <span class="op">=</span> <span class="fl">0.20</span>, </span></span>
<span class="r-in"><span>    tax_rate_ordinary_income <span class="op">=</span> <span class="fl">0.40</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">start_ages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">65</span>, <span class="fl">75</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">scenarios_parameters</span> <span class="op">&lt;-</span> </span></span>
<span class="r-in"><span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    member    <span class="op">=</span> <span class="st">"older"</span>,</span></span>
<span class="r-in"><span>    event      <span class="op">=</span> <span class="st">"retirement"</span>,</span></span>
<span class="r-in"><span>    start_age <span class="op">=</span> <span class="va">start_ages</span>,</span></span>
<span class="r-in"><span>    years     <span class="op">=</span> <span class="cn">Inf</span>,</span></span>
<span class="r-in"><span>    end_age   <span class="op">=</span> <span class="cn">Inf</span></span></span>
<span class="r-in"><span>   <span class="op">)</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>scenario_id <span class="op">=</span> <span class="va">start_age</span><span class="op">)</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>events <span class="op">=</span> <span class="op">-</span><span class="va">scenario_id</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">scenarios</span> <span class="op">&lt;-</span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="simulate_scenarios.html">simulate_scenarios</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    scenarios_parameters <span class="op">=</span> <span class="va">scenarios_parameters</span>,</span></span>
<span class="r-in"><span>    household            <span class="op">=</span> <span class="va">household</span>,</span></span>
<span class="r-in"><span>    portfolio            <span class="op">=</span> <span class="va">portfolio</span>,</span></span>
<span class="r-in"><span>    maxeval              <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>    current_date         <span class="op">=</span> <span class="st">"2020-07-15"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">plot_scenarios</span><span class="op">(</span><span class="va">scenarios</span>, <span class="st">"monthly"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kamil Wais, Olesia Wais.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

